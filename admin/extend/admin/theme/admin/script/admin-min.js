(function(a){a.algid=a.algid||{};a.algid.admin={options:{search:{threshold:5,url:"/api/"}}};a(function(){var b={};a(".datagrid").datagrid();a(".content input[type=text]:first").focus();a("form").submit(function(){a("input[type=submit]",this).attr("disabled","disabled")});a("abbr.timeago").timeago();a("#adminSearch input[name=term]").searchComplete({source:function(c,d){c.term in b?d(b[c.term]):a.ajax({url:a.algid.admin.options.search.url,dataType:"json",type:"post",data:{HEAD:JSON.stringify({plugin:"admin",
service:"search",action:"search"}),BODY:JSON.stringify({term:c.term})},success:function(f){if(f.HEAD.result){b[c.term]=f.BODY;window.console.log(f.BODY);d(f.BODY)}else d([])}})},select:function(c,d){if(d.item.link)location.href=d.item.link},minLength:2})});a.widget("custom.searchComplete",a.ui.autocomplete,{_renderMenu:function(b,c){var d=this,f="",g=-1;a.each(c,function(h,e){var i=e.category!=f;h=h==c.length-1;var j=g>=a.algid.admin.options.search.threshold;j&&i&&b.append("<li class='ui-autocomplete-more'>"+
g+" more...</li>");if(i){b.append("<li class='ui-autocomplete-category'>"+e.category+"</li>");f=e.category;g=-1}g++;if(g<a.algid.admin.options.search.threshold){e.label=e.title;e.value=e.title;d._renderItem(b,e)}j&&h&&b.append("<li class='ui-autocomplete-more'>"+g+" more...</li>")})}})})(jQuery);
