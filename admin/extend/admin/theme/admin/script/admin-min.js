(function(a){a.algid=a.algid||{};a.algid.admin={options:{base:{api:"api/",url:"/"},search:{threshold:5}}};a(function(){var b={};a(".datagrid").datagrid();a(".content input[type=text]:first").focus();a("form").submit(function(){a("input[type=submit]",this).attr("disabled","disabled")});a("abbr.timeago").timeago();a("#adminSearch input[name=term]").searchComplete({source:function(c,d){c.term in b?d(b[c.term]):a.api({plugin:"admin",service:"search",action:"search"},{term:c.term},{success:function(f){if(f.HEAD.result){b[c.term]=
f.BODY;d(f.BODY)}else d([])}})},select:function(c,d){if(d.item.link)location.href=d.item.link},minLength:2})});a.widget("custom.searchComplete",a.ui.autocomplete,{_renderMenu:function(b,c){var d=this,f="",g=-1;a.each(c,function(j,e){var h=e.category!=f,k=j==c.length-1,i=g>=a.algid.admin.options.search.threshold;i&&h&&b.append("<li class='ui-autocomplete-more'>"+g+" more...</li>");if(h){b.append("<li class='ui-autocomplete-category'>"+e.category+"</li>");f=e.category;g=-1}g++;if(g<a.algid.admin.options.search.threshold){e.label=
e.title;e.value=e.title;d._renderItem(b,e)}i&&k&&b.append("<li class='ui-autocomplete-more'>"+g+" more...</li>")})}})})(jQuery);
