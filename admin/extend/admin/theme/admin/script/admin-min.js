(function(a){a.algid=a.algid||{};a.algid.admin={options:{base:{api:"api/",url:"/"},search:{threshold:5}}};a(function(){var f={};a(".datagrid").datagrid();a(".content :input:first").focus();a("form").submit(function(){a("input[type=submit]",this).attr("disabled","disabled")});a(".timeago").timeago();a("#adminSearch input[name=term]").searchComplete({source:function(c,d){c.term in f?d(f[c.term]):a.api({plugin:"admin",service:"search",action:"search"},{term:c.term},{success:function(b){if(b.HEAD.result){f[c.term]=
b.BODY;d(b.BODY)}else d([])}})},select:function(c,d){if(d.item.link)location.href=d.item.link},minLength:2});a("body").bind("api.errors api.warnings api.successes api.messages",function(c,d,b){for(var e in b)b.hasOwnProperty(e)&&a.jGrowl(b[e])})});a.widget("custom.searchComplete",a.ui.autocomplete,{delay:280,_renderMenu:function(f,c){var d=this,b="",e=-1;a.each(c,function(j,g){var h=g.category!==b,k=j===c.length-1,i=e>=a.algid.admin.options.search.threshold;i&&h&&f.append("<li class='ui-autocomplete-more'>"+
e+" more...</li>");if(h){f.append("<li class='ui-autocomplete-category'>"+g.category+"</li>");b=g.category;e=-1}e++;if(e<a.algid.admin.options.search.threshold){g.label=g.title;g.value=g.title;d._renderItem(f,g)}i&&k&&f.append("<li class='ui-autocomplete-more'>"+e+" more...</li>")})}})})(jQuery);
