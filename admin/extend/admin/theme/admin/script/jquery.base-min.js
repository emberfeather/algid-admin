(function(a){a.algid=a.algid||{};a.algid.admin={options:{base:{api:"api/",url:"/"},search:{threshold:5}}};a(function(){var b={};a(".datagrid").datagrid();a(".container-content :input:first").focus();a("form").submit(function(){a("input[type=submit]",this).attr("disabled","disabled")});a(".timeago").timeago();a("#adminSearch input[name=term]").searchComplete({source:function(f,c){b[f.term]!==void 0?c(b[f.term]):a.api({plugin:"admin",service:"search",action:"search"},{term:f.term},{success:function(a){a.HEAD.result?
(b[f.term]=a.BODY,c(a.BODY)):c([])}})},select:function(a,c){if(c.item.link)location.href=c.item.link},minLength:2});a('.filter input[type="date"]').datepicker({dateFormat:"yy-mm-dd"});a("body").bind("api.errors api.warnings api.successes api.messages",function(a,c,b){for(var d in b)b.hasOwnProperty(d)&&window.console.log(b[d])})});a.widget("custom.searchComplete",a.ui.autocomplete,{delay:280,_renderMenu:function(b,f){var c=this,g="",d=-1;a.each(f,function(j,e){var h=e.category!==g,k=j===f.length-
1,i=d>=a.algid.admin.options.search.threshold;i&&h&&b.append("<li class='ui-autocomplete-more'>"+d+" more...</li>");if(h)b.append("<li class='ui-autocomplete-category'>"+e.category+"</li>"),g=e.category,d=-1;d++;if(d<a.algid.admin.options.search.threshold)e.label=e.title,e.value=e.title,c._renderItem(b,e);i&&k&&b.append("<li class='ui-autocomplete-more'>"+d+" more...</li>")})}})})(jQuery);
